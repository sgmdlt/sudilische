1. Анализ и документация текущей функциональности
   - Перед написанием тестов важно четко понимать и документировать текущее поведение системы.
   - Создайте краткое описание основных функций и ожидаемых результатов.

2. Написание регрессионных тестов с использованием VCR
   - Начните с критических путей и основных сценариев.
   - Убедитесь, что тесты охватывают различные типы запросов и ответов.

3. Рефакторинг исходного скрипта на три слоя/модуля
   - Downloader: ответственен за HTTP-запросы и обработку ответов.
   - Parser: отвечает за извлечение нужных данных из HTML.
   - Storage: управляет отправкой данных в Elasticsearch.

4. Создание промежуточных интерфейсов между слоями
   - Определите четкие интерфейсы между модулями для облегчения будущих изменений.

5. Реализация системы с очередью (RabbitMQ)
   - Создание producer для сканирования сайтов и отправки ссылок в очередь.
   - Реализация consumer для обработки ссылок из очереди.
   - Настройка механизмов повторных попыток и обработки ошибок.

6. Разработка системы мониторинга и логирования
   - Реализуйте логирование на всех этапах работы системы.
   - Создайте дашборд для отслеживания состояния очереди и работы воркеров.

7. Тестирование производительности и масштабируемости
   - Проведите нагрузочное тестирование для выявления узких мест.
   - Оптимизируйте код и настройки системы по результатам тестов.

8. Документация и инструкции по развертыванию
   - Создайте подробную документацию по архитектуре системы.
   - Напишите инструкции по установке, настройке и запуску всех компонентов.

9. Внедрение системы контроля версий и CI/CD
   - Настройте автоматическое выполнение тестов при коммитах.
   - Реализуйте автоматическое развертывание новых версий.
